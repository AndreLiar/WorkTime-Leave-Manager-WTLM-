# Repository Guidelines

## Project Structure & Module Organization
`src/` hosts every NestJS module, controller, and service; keep new features grouped as `<feature>.module.ts`, `<feature>.controller.ts`, and `<feature>.service.ts` alongside shared DTOs. `main.ts` boots `AppModule`; avoid side effects outside providers. End-to-end and integration harnesses live under `test/`; create fixtures near the specs they support. `dist/` is generated by `npm run build` and must remain untouched. Tooling resides at the root (`Dockerfile`, `eslint.config.mjs`, `jest.config.js`, `tsconfig*.json`, `.github/workflows/ci.yml`), so update those files when changing build or CI expectations.

## Build, Test, and Development Commands
- `npm run start:dev` – watch-mode Nest server with hot reload and verbose logging.
- `npm run build` – transpiles TypeScript into `dist/`; run before Docker or production deploys.
- `npm run start:prod` – launches the compiled build from `dist/main.js`.
- `npm run lint` / `npm run ts` – ESLint and standalone TypeScript checks; both must be clean pre-commit.
- `npm test`, `npm run test:watch`, `npm run test:cov` – run Jest suites once, in watch mode, or with coverage requirements respectively.

## Coding Style & Naming Conventions
TypeScript is formatted via Prettier (2-space indentation, single quotes) and validated by ESLint using the NestJS recommended rules; never bypass linters—fix the warning instead. Use PascalCase for classes/providers, camelCase for variables and methods, and kebab-case file names (e.g., `worktime.service.ts`). Keep modules thin: controllers map HTTP to services, and services encapsulate business logic. Prefer dependency injection and avoid static utilities unless unavoidable.

## Testing Guidelines
Jest drives both unit specs in `src/**/*.spec.ts` and higher-level suites under `test/`. Mirror the module or service name in the spec file, and keep `describe` blocks aligned with public methods. Any feature touching business rules must include positive, edge, and failure cases; add mocks to the local spec instead of global singletons. Maintain ≥80% branch coverage via `npm run test:cov`, and ensure new tests pass with `npm run test:watch` before submitting.

## Commit & Pull Request Guidelines
Git history shows short imperative messages with optional Conventional Commit prefixes (`docs: Add Husky setup guide`). Keep the subject ≤72 characters, describe *what* and *why*, and reference issues using `#ID` when relevant. Each pull request should summarize the change, list validation steps (commands executed, screenshots for endpoint responses when useful), and note any config migrations or ENV additions. Ensure CI (lint, type-check, tests, build) passes locally before opening the PR and re-run after addressing reviewer comments.
